<%- include ('adminHeader') %>

<section class="content-main">
    <div class="content-header">
      <div>
        <h2 class="content-title card-title">Products</h2>
      </div>
      <div>
        <div>  
            <a href="/admin/addProduct" class="btn btn-primary btn-sm rounded">Add Product</a>
          </div> 
      </div>
    </div>
    <header class="card card-body mb-4">
      <div class="row gx-3">
        <form class="d-flex" role="search" method="post" >
            <div class="col-lg-4 col-md-6 me-auto">
              <input type="search" placeholder="Search..." class="form-control" name="search" value="<%#= userSearch %>"/>
            </div>
            </form>
      </div>
    </header>
    <!-- card-header end// -->
    <div class="card">
    <div class="card-body">
      <div class="row">
        
        <div class="container mt-6">
          <div class="row">
          <div class="col-md-12 table-responsive"> 
            <table class="table table-striped" width="50%>">
              <tr>
                <th style="color:rgb(0, 0, 0);font-size:small; text-align: center; ">Product Image</th>
                <th style="color:rgb(0, 0, 0);font-size:small; text-align: center; ">Name</th>
                <th style="color:rgb(0, 0, 0);font-size:small; text-align: center; ">Category</th>
                <th style="color:rgb(0, 0, 0);font-size:small; text-align: center; ">Rate</th>
                <th style="color:rgb(0, 0, 0);font-size:small; text-align: center; ">Stock</th>
                <th style="color:rgb(0, 0, 0);font-size:small; text-align: center; width: 250px;">Description</th>
               <th style="color:rgb(0, 0, 0);font-size:small; text-align: center; ">Edit</th>
                <th style="color:rgb(0, 0, 0);font-size:small; text-align: center; ">Hide</th>
              </tr>
               <% for(let p of product) { %>
              <tr>
                <td style="text-align: center;"><img src="<%= p.image[0] %>" style="padding:15%;" height="100px" width="100px" >  </td>
                <!-- <p>"<%= p.image[0] %>"</p> -->
                <!-- <img src="../upload/1708416844295-03_Black_Suit1_2023_0491_2812x3750_ed7f25d4-87c0-4b57-a0e0-56798c465d63.webp" alt="image not found"> -->
                <td style="text-align: center;"><%=p.name %></td>
                <td style="text-align: center;"><%=p.category %> </td>
                <td style="text-align: center;">â‚¹<%=p.rate %></td> 
                <td style="text-align: center;"><%=p.stock %></td>
                <td style="text-align:center;" class="description" title="<%=p.description %>"><%=p.description %></td> 
                <td style="text-align: center;">
                  <form action="/admin/productEdit/<%=p.name%>" method="post">
                    <input type="hidden" value="<%=p.name%>" name="oldName">
                    <input type="hidden" value="<%=p.category %>" name="oldCategory">
                     <input type="hidden" value="<%=p.rate %>" name="oldRate">
                    <input type="hidden" value="<%=p.stock %>" name="oldStock"> 
                    <input  style="overflow: hidden;" type="hidden" value="<%=p.description %>" name="oldDesc"> 
                    <button class="btn btn-success" type="submit">Edit</button>
                    
                  </form>
                </td>
                <td style="text-align: center;"> <% if(!p.hide){ %><button style="background-color:coral;"  type="button"
                  id="<%=p._id %>"
                  onclick="toggleFunction('<%=p._id %>')"
                >
                Hide
              </button>
              <% }else{ %>
              <button
                style="background-color:green;"
                  type="button"
                  id="<%=p._id %>"
                  onclick="toggleFunction('<%=p._id %>')"
                >
                Show
              </button>
              <% } %>
                </td> 
              </tr>
              <% } %>
              
            </table>
            </div>
          </div>
        </div>
      </div>
    </div>
  </div>
   
  </section>


<%- include ('adminFooter') %>
